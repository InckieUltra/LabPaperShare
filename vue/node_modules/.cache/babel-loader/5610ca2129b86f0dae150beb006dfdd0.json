{"remainingRequest":"/Users/liujiaming/Documents/LabPaperShare-main/vue/node_modules/babel-loader/lib/index.js!/Users/liujiaming/Documents/LabPaperShare-main/vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liujiaming/Documents/LabPaperShare-main/vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/liujiaming/Documents/LabPaperShare-main/vue/src/views/User.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liujiaming/Documents/LabPaperShare-main/vue/src/views/User.vue","mtime":1652025622599},{"path":"/Users/liujiaming/Documents/LabPaperShare-main/vue/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1651659848347},{"path":"/Users/liujiaming/Documents/LabPaperShare-main/vue/node_modules/babel-loader/lib/index.js","mtime":1651659848904},{"path":"/Users/liujiaming/Documents/LabPaperShare-main/vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1651659848347},{"path":"/Users/liujiaming/Documents/LabPaperShare-main/vue/node_modules/vue-loader-v16/dist/index.js","mtime":1651659849069}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVc2VyJywKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgZm9ybToge30sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBib29rVmlzOiBmYWxzZSwKICAgICAgc2VhcmNoOiAnJywKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgdG90YWw6IDAsCiAgICAgIHRvdGFsUGFnZTogMSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgcm9sZXM6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZCgpOyAvL3RoaXMuc2V0Q3VycmVudFBhZ2VEYXRhKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKHJvdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmVxdWVzdC5wb3N0KCIvYXBpL2FkbWluL3VzZXIvY2hhbmdlcm9sZT91c2VyX2lkPSIgKyByb3cudXNlcl9pZCArICImcm9sZV9pZD0iICsgcm93LnJvbGUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5pu05paw5oiQ5YqfIik7CgogICAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL3VzZXIiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgcmVxdWVzdC5wb3N0KCIvYXBpL2FkbWluL2FsbHVzZXIiKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmxlbmd0aCk7CiAgICAgICAgICBjb25zb2xlLmxvZygicmVzLmRhdGEudG90YWwiKTsKICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBfdGhpczIudGFibGVEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIudGFibGVEYXRhKTsKICAgICAgICAgIF90aGlzMi50b3RhbCA9IHJlcy5kYXRhLmxlbmd0aDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAxKSB7CiAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJlcXVlc3QucG9zdCgiL2FwaS9hZG1pbi9hbGxyb2xlIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLnJvbGVzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXQocm93KSB7CiAgICAgIHRoaXMuZm9ybSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm93KSk7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUoaWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZyhpZCk7CiAgICAgIHJlcXVlc3QucG9zdCgiL2FwaS9hZG1pbi91c2VyL2RlbGV0ZT91c2VyX2lkPSIgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTmiJDlip8iCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczMubG9hZCgpOyAvLyDliKDpmaTkuYvlkI7ph43mlrDliqDovb3ooajmoLznmoTmlbDmja4KCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2UocGFnZVNpemUpIHsKICAgICAgLy8g5pS55Y+Y5b2T5YmN5q+P6aG155qE5Liq5pWw6Kem5Y+RCiAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7CiAgICAgIC8vIOaUueWPmOW9k+WJjemhteeggeinpuWPkQogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZU51bTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/liujiaming/Documents/LabPaperShare-main/vue/src/views/User.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n\n\n    <!--    搜索区域-->\n    <div style=\"margin: 10px 0\">\n      <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\n    </div>\n    <el-table\n        v-loading=\"loading\"\n        :data=\"tableData.slice((currentPage-1)*pageSize,currentPage*pageSize)\"\n        border\n        stripe\n        style=\"width: 100%\">\n      <el-table-column\n          prop=\"user_id\"\n          label=\"ID\"\n          sortable\n      >\n      </el-table-column>\n      <el-table-column\n          prop=\"userName\"\n          label=\"用户名\">\n      </el-table-column>\n\n      <el-table-column label=\"用户角色\" width=\"300\">\n        <template #default=\"scope\">\n          <el-select v-model=\"scope.row.role\" placeholder=\"请选择\" style=\"width: 80%\">\n            <el-option v-for=\"item in roles\" :key=\"item.role_id\" :label=\"item.comment\" :value=\"item.role_id\"></el-option>\n          </el-select>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"400\">\n        <template #default=\"scope\">\n          <el-button size=\"mini\" type=\"primary\" @click=\"handleChange(scope.row)\">保存角色信息</el-button>\n          <el-popconfirm title=\"确定删除吗？\" @confirm=\"handleDelete(scope.row.user_id)\">\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n    </div>\n\n\n\n  </div>\n</template>\n\n<script>\n\n\nimport request from \"@/utils/request\";\n\nexport default {\n  name: 'User',\n  components: {},\n  data() {\n    return {\n      loading: true,\n      form: {},\n      dialogVisible: false,\n      bookVis: false,\n      search: '',\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      totalPage:1,\n      tableData: [],\n      roles: []\n    }\n  },\n  created() {\n    this.load()\n    //this.setCurrentPageData()\n  },\n  methods: {\n    handleChange(row) {\n      request.post(\"/api/admin/user/changerole?user_id=\"+row.user_id+\"&role_id=\"+row.role).then(res => {\n        if (res.code === 0) {\n          this.$message.success(\"更新成功\")\n          if (res.data) {\n            this.$router.push(\"/user\")\n          }\n        }\n      })\n    },\n\n    load() {\n      this.loading = true\n      request.post(\"/api/admin/alluser\").then(res => {\n        if (res.code === 0){\n          console.log(res.data.length)\n          console.log(\"res.data.total\")\n\n          this.loading = false\n          this.tableData = res.data\n          console.log(this.tableData)\n          this.total = res.data.length\n        }else{\n          this.$message({\n            type: \"error\",\n            message: res.msg,\n\n          })\n          if (res.code === 1){\n            \n            this.$router.push(\"/login\")\n          }\n        }\n\n      })\n\n      request.post(\"/api/admin/allrole\").then(res => {\n        this.roles = res.data\n      })\n    },\n\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row))\n      this.dialogVisible = true\n    },\n    handleDelete(id) {\n      console.log(id)\n      request.post(\"/api/admin/user/delete?user_id=\" + id).then(res => {\n        if (res.code === 0) {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          })\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          })\n        }\n        this.load()  // 删除之后重新加载表格的数据\n      })\n    },\n    handleSizeChange(pageSize) {   // 改变当前每页的个数触发\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum) {  // 改变当前页码触发\n      this.currentPage = pageNum\n      this.load()\n    }\n  }\n}\n</script>\n"],"sourceRoot":""}]}