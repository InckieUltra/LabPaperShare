(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae9ad570"],{"0a6b":function(e,t,n){"use strict";n("a316")},"4ea3":function(e,t,n){"use strict";n("b0c0");var i=n("7a23");Object(i["M"])("data-v-621c5d39");var c={style:{width:"50%"}},s={class:"reply-info"},o={class:"reply-btn-box"},r=Object(i["p"])(" 发表回复 "),a={class:"author-info"},l={class:"author-name"},u={class:"author-time"},p={class:"icon-btn"},d=["onClick"],m=Object(i["n"])("i",{class:"el-icon-s-comment"},null,-1),b=Object(i["p"])(" 回复 "),h=[m,b],f=["onClick"],O=Object(i["n"])("i",{class:"el-icon-s-delete"},null,-1),j=Object(i["p"])(" 删除 "),g=[O,j],y=["onClick"],_=Object(i["n"])("i",{class:"el-icon-s-delete"},null,-1),v=Object(i["p"])(" 修改1 "),C=[_,v],k={class:"talk-box"},x={class:"reply"},w={class:"reply-box"},S={class:"author-info"},I={class:"author-name"},N={class:"author-time"},z={class:"icon-btn"},q=["onClick"],R=Object(i["n"])("i",{class:"el-icon-s-comment"},null,-1),E=Object(i["p"])(" 回复1 "),J=[R,E],T=["onClick"],F=Object(i["n"])("i",{class:"el-icon-s-delete"},null,-1),$=Object(i["p"])(" 删除1 "),A=[F,$],M=["onClick"],D=Object(i["n"])("i",{class:"el-icon-s-delete"},null,-1),P=Object(i["p"])(" 修改1 "),B=[D,P],L={class:"talk-box",style:{"font-size":"14px"}},W={class:"reply"},H=Object(i["n"])("div",{class:"reply-box"},null,-1),U={class:"my-reply my-comment-reply"},V={class:"reply-info"},G={class:"reply-btn-box"},Q=Object(i["p"])(" 发表回复1 ");function X(e,t,n,m,b,O){var j=this,_=Object(i["S"])("el-avatar"),v=Object(i["S"])("el-button"),R=Object(i["T"])("clickoutside");return Object(i["J"])(),Object(i["m"])("div",c,[Object(i["jb"])(Object(i["n"])("div",{onClick:t[2]||(t[2]=function(){return O.inputFocus&&O.inputFocus.apply(O,arguments)}),class:"my-reply"},[Object(i["q"])(_,{class:"header-img",size:40,src:b.circleUrl},null,8,["src"]),Object(i["n"])("div",s,[Object(i["n"])("div",{tabindex:"0",contenteditable:"true",id:"replyInput",spellcheck:"false",placeholder:"输入评论...",class:"reply-input",onFocus:t[0]||(t[0]=function(){return O.showReplyBtn&&O.showReplyBtn.apply(O,arguments)}),onInput:t[1]||(t[1]=function(e){return O.onDivInput(e)})},null,32)]),Object(i["jb"])(Object(i["n"])("div",o,[Object(i["q"])(v,{class:"reply-btn",size:"medium",onClick:O.sendComment,type:"primary"},{default:Object(i["ib"])((function(){return[r]})),_:1},8,["onClick"])],512),[[i["eb"],b.btnShow]])],512),[[R,O.hideReplyBtn]]),(Object(i["J"])(!0),Object(i["m"])(i["b"],null,Object(i["Q"])(b.comments,(function(n,c){return Object(i["J"])(),Object(i["m"])("div",{key:c,class:"author-title reply-father"},[Object(i["q"])(_,{class:"header-img",size:40,src:b.circleUrl},null,8,["src"]),Object(i["n"])("div",a,[Object(i["n"])("span",l,Object(i["W"])(n.name),1),Object(i["n"])("span",u,Object(i["W"])(n.time),1)]),Object(i["n"])("div",p,[Object(i["n"])("span",{onClick:function(e){return O.showReplyInput(c,n.name,n.comment_id)},style:{"font-size":"14px"}},h,8,d),1==b.user_id?(Object(i["J"])(),Object(i["m"])("span",{key:0,onClick:function(t){return O.deleteReply(c,e.reply.name,e.reply.comment_id)},style:{"font-size":"14px"}},g,8,f)):Object(i["l"])("",!0),1==b.user_id?(Object(i["J"])(),Object(i["m"])("span",{key:1,onClick:function(t){return O.updateReply(c,e.reply.name,e.reply.comment_id)},style:{"font-size":"14px"}},C,8,y)):Object(i["l"])("",!0)]),Object(i["n"])("div",k,[Object(i["n"])("p",null,[Object(i["n"])("span",x,Object(i["W"])(n.text),1)])]),Object(i["n"])("div",w,[(Object(i["J"])(!0),Object(i["m"])(i["b"],null,Object(i["Q"])(n.reply,(function(e,t){return Object(i["J"])(),Object(i["m"])("div",{key:t,class:"author-title"},[Object(i["q"])(_,{class:"header-img",size:40,src:b.circleUrl},null,8,["src"]),Object(i["n"])("div",S,[Object(i["n"])("span",I,Object(i["W"])(e.name),1),Object(i["n"])("span",N,Object(i["W"])(e.time),1)]),Object(i["n"])("div",z,[Object(i["n"])("span",{onClick:function(t){return O.showReplyInput(c,e.name,e.comment_id)},style:{"font-size":"14px"}},J,8,q),1==b.role||e.name==j.userName?(Object(i["J"])(),Object(i["m"])("span",{key:0,onClick:function(t){return O.deleteReply(c,e.name,e.comment_id)},style:{"font-size":"14px"}},A,8,T)):Object(i["l"])("",!0),e.name==j.userName?(Object(i["J"])(),Object(i["m"])("span",{key:1,onClick:function(t){return O.updateReply(c,e.name,e.comment_id)},style:{"font-size":"14px"}},B,8,M)):Object(i["l"])("",!0)]),Object(i["n"])("div",L,[Object(i["n"])("p",null,[Object(i["n"])("span",null,"回复 "+Object(i["W"])(e.to)+":",1),Object(i["n"])("span",W,Object(i["W"])(e.text),1)])]),H])})),128))]),Object(i["jb"])(Object(i["n"])("div",U,[Object(i["q"])(_,{class:"header-img",size:40,src:b.circleUrl},null,8,["src"]),Object(i["n"])("div",V,[Object(i["n"])("div",{tabindex:"0",contenteditable:"true",spellcheck:"false",placeholder:"输入评论...",onInput:t[3]||(t[3]=function(e){return O.onDivInput(e)}),class:"reply-input reply-comment-input"},null,32)]),Object(i["n"])("div",G,[Object(i["q"])(v,{class:"reply-btn",size:"medium",onClick:function(e){return O.sendCommentReply(c,j.super_id)}},{default:Object(i["ib"])((function(){return[Q]})),_:2},1032,["onClick"])])],512),[[i["eb"],O._inputShow(c)]])])})),128))])}Object(i["K"])();n("a9e3");var Y=n("b775"),K={bind:function(e,t,n){function i(n){if(e.contains(n.target))return!1;t.expression&&t.value(n)}e.vueClickOutside=i,document.addEventListener("click",i)},update:function(){}},Z={name:"Comment",props:{paperid:Number},data:function(){return{circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",user_id:"",userName:"",role:"",loading:!0,paper_id:"",comment_id:1,btnShow:!1,index:"0",replyComment:"",myHeader:"https://ae01.alicdn.com/kf/Hd60a3f7c06fd47ae85624badd32ce54dv.jpg",to:"",super_id:0,comments:[]}},directives:{clickoutside:K},created:function(){var e=this,t=sessionStorage.getItem("user");this.user_id=JSON.parse(t).user_id,this.role=JSON.parse(t).user_id,this.userName=JSON.parse(t).userName,this.paper_id=this.paperid,Y["a"].post("/api/getcomment?paper_id="+this.paper_id).then((function(t){0===t.code?(console.log(t.data),e.comments=t.data,e.$message.success("成功加载评论")):e.$message.error("失败")}))},methods:{inputFocus:function(){var e=document.getElementById("replyInput");e.style.padding="8px 8px",e.style.border="2px solid blue",e.focus()},loadMsg:function(){var e=this;Y["a"].post("/api/getcomment?paper_id="+this.paper_id).then((function(t){e.comments=t.data}))},showReplyBtn:function(){this.btnShow=!0},hideReplyBtn:function(){this.btnShow=!1,replyInput.style.padding="10px",replyInput.style.border="none"},showReplyInput:function(e,t,n){this.comments[this.index].inputShow=!1,this.index=e,this.comments[e].inputShow=!0,this.to=t,console.log(e),console.log(this.comments[e].comment_id),this.super_id=this.comments[e].comment_id},updateReply:function(e,t,n){this.comments[this.index].inputShow=!1,this.index=e,this.comments[e].inputShow=!0,this.to=t,console.log(e),console.log(this.comments[e].comment_id),this.super_id=this.comments[e].comment_id},deleteReply:function(e,t,n){this.comments[this.index].inputShow=!1,this.index=e,this.comments[e].inputShow=!0,this.to=t,console.log(e),console.log(this.comments[e].comment_id),this.super_id=this.comments[e].comment_id},_inputShow:function(e){return this.comments[e].inputShow},sendComment:function(){var e=this;if(this.replyComment){var t={},n=document.getElementById("replyInput"),i=this.getCurTime();t.user_id=this.user_id,t.userName=this.userName,t.text=this.replyComment,t.paper_id=this.paper_id,t.time=i,t.super_id=0,console.log(t),this.comments.push(t),this.replyComment="",n.innerHTML="",Y["a"].post("/api/comment",t).then((function(t){0===t.code?e.$message({type:"success",message:"评论成功"}):e.$message({type:"error",message:"评论失败"})})),this.loadMsg()}else this.$message({showClose:!0,type:"warning",message:"评论不能为空"})},sendCommentReply:function(e,t){var n=this;if(console.log("toId: "+t),this.replyComment){var i={},c=this.getCurTime();i.user_id=this.user_id,i.from=this.userName,i.to=this.to,i.fromHeadImg=this.myHeader,i.text=this.replyComment,i.time=c,i.super_id=t,console.log(i),console.log(this.to),i.paper_id=this.paper_id,this.comments[e].reply.push(i),Y["a"].post("/api/comment",i).then((function(e){0===e.code?n.$message({type:"success",message:"评论成功"}):n.$message({type:"error",message:"评论失败"})})),this.replyComment="",document.getElementsByClassName("reply-comment-input")[e].innerHTML="",this.loadMsg()}else this.$message({showClose:!0,type:"warning",message:"评论不能为空"})},onDivInput:function(e){this.replyComment=e.target.innerHTML},getCurTime:function(){var e=new Date;return e.toLocaleString()}}};n("0a6b");Z.render=X,Z.__scopeId="data-v-621c5d39";t["a"]=Z},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var i=n("1d80"),c=n("577e"),s=n("5899"),o="["+s+"]",r=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),l=function(e){return function(t){var n=c(i(t));return 1&e&&(n=n.replace(r,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(e,t,n){var i=n("861d"),c=n("d2bb");e.exports=function(e,t,n){var s,o;return c&&"function"==typeof(s=t.constructor)&&s!==n&&i(o=s.prototype)&&o!==n.prototype&&c(e,o),e}},a316:function(e,t,n){},a9e3:function(e,t,n){"use strict";var i=n("83ab"),c=n("da84"),s=n("94ca"),o=n("6eeb"),r=n("5135"),a=n("c6b6"),l=n("7156"),u=n("d9b5"),p=n("c04e"),d=n("d039"),m=n("7c73"),b=n("241c").f,h=n("06cf").f,f=n("9bf2").f,O=n("58a8").trim,j="Number",g=c[j],y=g.prototype,_=a(m(y))==j,v=function(e){if(u(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,i,c,s,o,r,a,l=p(e,"number");if("string"==typeof l&&l.length>2)if(l=O(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:i=2,c=49;break;case 79:case 111:i=8,c=55;break;default:return+l}for(s=l.slice(2),o=s.length,r=0;r<o;r++)if(a=s.charCodeAt(r),a<48||a>c)return NaN;return parseInt(s,i)}return+l};if(s(j,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var C,k=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof k&&(_?d((function(){y.valueOf.call(n)})):a(n)!=j)?l(new g(v(t)),n,k):v(t)},x=i?b(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),w=0;x.length>w;w++)r(g,C=x[w])&&!r(k,C)&&f(k,C,h(g,C));k.prototype=y,y.constructor=k,o(c,j,k)}},fcac:function(e,t,n){"use strict";n.r(t);var i=n("7a23"),c={style:{padding:"10px"}},s=Object(i["p"])("浏览论文"),o=Object(i["p"])("详情"),r=Object(i["p"])("附件"),a=Object(i["p"])("删除"),l={style:{margin:"10px 0"}};function u(e,t,n,u,p,d){var m=Object(i["S"])("el-breadcrumb-item"),b=Object(i["S"])("el-breadcrumb"),h=Object(i["S"])("el-table-column"),f=Object(i["S"])("el-button"),O=Object(i["S"])("el-table"),j=Object(i["S"])("el-pagination"),g=Object(i["T"])("loading");return Object(i["J"])(),Object(i["m"])("div",c,[Object(i["q"])(b,{separator:"/"},{default:Object(i["ib"])((function(){return[Object(i["q"])(m,{to:{path:"/category"}},{default:Object(i["ib"])((function(){return[s]})),_:1}),Object(i["q"])(m,null,{default:Object(i["ib"])((function(){return[Object(i["p"])(Object(i["W"])(p.field_name),1)]})),_:1})]})),_:1}),Object(i["jb"])(Object(i["q"])(O,{data:p.tableData,border:"",stripe:"",style:{width:"1100px","margin-top":"10px"}},{default:Object(i["ib"])((function(){return[Object(i["q"])(h,{prop:"title",label:"论文标题"}),Object(i["q"])(h,{prop:"authors",label:"论文作者"}),Object(i["q"])(h,{prop:"conference",label:"发布会议"}),Object(i["q"])(h,{prop:"date",label:"发布时间"}),Object(i["q"])(h,{label:"操作"},{default:Object(i["ib"])((function(e){return[Object(i["q"])(f,{size:"mini",type:"primary",onClick:function(t){return d.seeDetail(e.row)}},{default:Object(i["ib"])((function(){return[o]})),_:2},1032,["onClick"]),Object(i["q"])(f,{size:"mini",onClick:function(t){return d.seeFile(e.row)}},{default:Object(i["ib"])((function(){return[r]})),_:2},1032,["onClick"]),Object(i["q"])(f,{size:"mini",onClick:function(t){return d.deletePaper(e.row)}},{default:Object(i["ib"])((function(){return[a]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),[[g,p.loading]]),Object(i["n"])("div",l,[Object(i["q"])(j,{onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange,"current-page":p.currentPage,"page-sizes":[1,3,5,10,20],"page-size":p.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:p.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])}var p=n("b775"),d=n("4ea3"),m={name:"Role",components:{comment:d["a"]},data:function(){return{drawer:!1,loading:!0,field_id:"",paper_id:"",field_name:"",form:{},dialogVisible:!1,bookVis:!1,search:"",currentPage:1,pageSize:10,total:0,totalPage:1,tableData:[]}},created:function(){this.field_id=this.$route.query.field_id,this.field_name=this.$route.query.field_name,this.load()},methods:{load:function(){var e=this;this.loading=!0,console.log("okNow");var t=this.currentPage-1;p["a"].post("/api/findpaperbyfield?field_id="+this.field_id+"&page_no="+t+"&page_size="+this.pageSize).then((function(t){0===t.code&&(e.tableData=t.data[1],e.total=t.data[0],console.log(t))})),this.loading=!1},seeDetail:function(e){console.log("seeDetail: "),console.log(e),this.$router.push({path:"/detail",query:{paper_id:e.paper_id}})},seeFile:function(e){console.log(e)},deletePaper:function(e){console.log("seeComment: "),console.log(e),this.drawer=!0},handleSizeChange:function(e){this.pageSize=e,this.load()},handleCurrentChange:function(e){this.currentPage=e,this.load()}}};m.render=u;t["default"]=m}}]);
//# sourceMappingURL=chunk-ae9ad570.9b87c92e.js.map