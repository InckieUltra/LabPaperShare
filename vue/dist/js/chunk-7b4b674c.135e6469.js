(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b4b674c"],{"0a6b":function(e,t,n){"use strict";n("a316")},"4ea3":function(e,t,n){"use strict";n("b0c0");var c=n("7a23");Object(c["M"])("data-v-621c5d39");var i={style:{width:"50%"}},s={class:"reply-info"},o={class:"reply-btn-box"},r=Object(c["p"])(" 发表回复 "),l={class:"author-info"},a={class:"author-name"},u={class:"author-time"},p={class:"icon-btn"},m=["onClick"],b=Object(c["n"])("i",{class:"el-icon-s-comment"},null,-1),d=Object(c["p"])(" 回复 "),f=[b,d],O=["onClick"],j=Object(c["n"])("i",{class:"el-icon-s-delete"},null,-1),h=Object(c["p"])(" 删除 "),y=[j,h],g=["onClick"],v=Object(c["n"])("i",{class:"el-icon-s-delete"},null,-1),_=Object(c["p"])(" 修改1 "),x=[v,_],C={class:"talk-box"},k={class:"reply"},w={class:"reply-box"},I={class:"author-info"},S={class:"author-name"},N={class:"author-time"},q={class:"icon-btn"},z=["onClick"],R=Object(c["n"])("i",{class:"el-icon-s-comment"},null,-1),E=Object(c["p"])(" 回复1 "),J=[R,E],W=["onClick"],T=Object(c["n"])("i",{class:"el-icon-s-delete"},null,-1),A=Object(c["p"])(" 删除1 "),M=[T,A],$=["onClick"],F=Object(c["n"])("i",{class:"el-icon-s-delete"},null,-1),L=Object(c["p"])(" 修改1 "),B=[F,L],H={class:"talk-box",style:{"font-size":"14px"}},U={class:"reply"},D=Object(c["n"])("div",{class:"reply-box"},null,-1),P={class:"my-reply my-comment-reply"},V={class:"reply-info"},G={class:"reply-btn-box"},Q=Object(c["p"])(" 发表回复1 ");function X(e,t,n,b,d,j){var h=this,v=Object(c["S"])("el-avatar"),_=Object(c["S"])("el-button"),R=Object(c["T"])("clickoutside");return Object(c["J"])(),Object(c["m"])("div",i,[Object(c["jb"])(Object(c["n"])("div",{onClick:t[2]||(t[2]=function(){return j.inputFocus&&j.inputFocus.apply(j,arguments)}),class:"my-reply"},[Object(c["q"])(v,{class:"header-img",size:40,src:d.circleUrl},null,8,["src"]),Object(c["n"])("div",s,[Object(c["n"])("div",{tabindex:"0",contenteditable:"true",id:"replyInput",spellcheck:"false",placeholder:"输入评论...",class:"reply-input",onFocus:t[0]||(t[0]=function(){return j.showReplyBtn&&j.showReplyBtn.apply(j,arguments)}),onInput:t[1]||(t[1]=function(e){return j.onDivInput(e)})},null,32)]),Object(c["jb"])(Object(c["n"])("div",o,[Object(c["q"])(_,{class:"reply-btn",size:"medium",onClick:j.sendComment,type:"primary"},{default:Object(c["ib"])((function(){return[r]})),_:1},8,["onClick"])],512),[[c["eb"],d.btnShow]])],512),[[R,j.hideReplyBtn]]),(Object(c["J"])(!0),Object(c["m"])(c["b"],null,Object(c["Q"])(d.comments,(function(n,i){return Object(c["J"])(),Object(c["m"])("div",{key:i,class:"author-title reply-father"},[Object(c["q"])(v,{class:"header-img",size:40,src:d.circleUrl},null,8,["src"]),Object(c["n"])("div",l,[Object(c["n"])("span",a,Object(c["W"])(n.name),1),Object(c["n"])("span",u,Object(c["W"])(n.time),1)]),Object(c["n"])("div",p,[Object(c["n"])("span",{onClick:function(e){return j.showReplyInput(i,n.name,n.comment_id)},style:{"font-size":"14px"}},f,8,m),1==d.user_id?(Object(c["J"])(),Object(c["m"])("span",{key:0,onClick:function(t){return j.deleteReply(i,e.reply.name,e.reply.comment_id)},style:{"font-size":"14px"}},y,8,O)):Object(c["l"])("",!0),1==d.user_id?(Object(c["J"])(),Object(c["m"])("span",{key:1,onClick:function(t){return j.updateReply(i,e.reply.name,e.reply.comment_id)},style:{"font-size":"14px"}},x,8,g)):Object(c["l"])("",!0)]),Object(c["n"])("div",C,[Object(c["n"])("p",null,[Object(c["n"])("span",k,Object(c["W"])(n.text),1)])]),Object(c["n"])("div",w,[(Object(c["J"])(!0),Object(c["m"])(c["b"],null,Object(c["Q"])(n.reply,(function(e,t){return Object(c["J"])(),Object(c["m"])("div",{key:t,class:"author-title"},[Object(c["q"])(v,{class:"header-img",size:40,src:d.circleUrl},null,8,["src"]),Object(c["n"])("div",I,[Object(c["n"])("span",S,Object(c["W"])(e.name),1),Object(c["n"])("span",N,Object(c["W"])(e.time),1)]),Object(c["n"])("div",q,[Object(c["n"])("span",{onClick:function(t){return j.showReplyInput(i,e.name,e.comment_id)},style:{"font-size":"14px"}},J,8,z),1==d.role||e.name==h.userName?(Object(c["J"])(),Object(c["m"])("span",{key:0,onClick:function(t){return j.deleteReply(i,e.name,e.comment_id)},style:{"font-size":"14px"}},M,8,W)):Object(c["l"])("",!0),e.name==h.userName?(Object(c["J"])(),Object(c["m"])("span",{key:1,onClick:function(t){return j.updateReply(i,e.name,e.comment_id)},style:{"font-size":"14px"}},B,8,$)):Object(c["l"])("",!0)]),Object(c["n"])("div",H,[Object(c["n"])("p",null,[Object(c["n"])("span",null,"回复 "+Object(c["W"])(e.to)+":",1),Object(c["n"])("span",U,Object(c["W"])(e.text),1)])]),D])})),128))]),Object(c["jb"])(Object(c["n"])("div",P,[Object(c["q"])(v,{class:"header-img",size:40,src:d.circleUrl},null,8,["src"]),Object(c["n"])("div",V,[Object(c["n"])("div",{tabindex:"0",contenteditable:"true",spellcheck:"false",placeholder:"输入评论...",onInput:t[3]||(t[3]=function(e){return j.onDivInput(e)}),class:"reply-input reply-comment-input"},null,32)]),Object(c["n"])("div",G,[Object(c["q"])(_,{class:"reply-btn",size:"medium",onClick:function(e){return j.sendCommentReply(i,h.super_id)}},{default:Object(c["ib"])((function(){return[Q]})),_:2},1032,["onClick"])])],512),[[c["eb"],j._inputShow(i)]])])})),128))])}Object(c["K"])();n("a9e3");var Y=n("b775"),K={bind:function(e,t,n){function c(n){if(e.contains(n.target))return!1;t.expression&&t.value(n)}e.vueClickOutside=c,document.addEventListener("click",c)},update:function(){}},Z={name:"Comment",props:{paperid:Number},data:function(){return{circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",user_id:"",userName:"",role:"",loading:!0,paper_id:"",comment_id:1,btnShow:!1,index:"0",replyComment:"",myHeader:"https://ae01.alicdn.com/kf/Hd60a3f7c06fd47ae85624badd32ce54dv.jpg",to:"",super_id:0,comments:[]}},directives:{clickoutside:K},created:function(){var e=this,t=sessionStorage.getItem("user");this.user_id=JSON.parse(t).user_id,this.role=JSON.parse(t).user_id,this.userName=JSON.parse(t).userName,this.paper_id=this.paperid,Y["a"].post("/api/getcomment?paper_id="+this.paper_id).then((function(t){0===t.code?(console.log(t.data),e.comments=t.data,e.$message.success("成功加载评论")):e.$message.error("失败")}))},methods:{inputFocus:function(){var e=document.getElementById("replyInput");e.style.padding="8px 8px",e.style.border="2px solid blue",e.focus()},loadMsg:function(){var e=this;Y["a"].post("/api/getcomment?paper_id="+this.paper_id).then((function(t){e.comments=t.data}))},showReplyBtn:function(){this.btnShow=!0},hideReplyBtn:function(){this.btnShow=!1,replyInput.style.padding="10px",replyInput.style.border="none"},showReplyInput:function(e,t,n){this.comments[this.index].inputShow=!1,this.index=e,this.comments[e].inputShow=!0,this.to=t,console.log(e),console.log(this.comments[e].comment_id),this.super_id=this.comments[e].comment_id},updateReply:function(e,t,n){this.comments[this.index].inputShow=!1,this.index=e,this.comments[e].inputShow=!0,this.to=t,console.log(e),console.log(this.comments[e].comment_id),this.super_id=this.comments[e].comment_id},deleteReply:function(e,t,n){this.comments[this.index].inputShow=!1,this.index=e,this.comments[e].inputShow=!0,this.to=t,console.log(e),console.log(this.comments[e].comment_id),this.super_id=this.comments[e].comment_id},_inputShow:function(e){return this.comments[e].inputShow},sendComment:function(){var e=this;if(this.replyComment){var t={},n=document.getElementById("replyInput"),c=this.getCurTime();t.user_id=this.user_id,t.userName=this.userName,t.text=this.replyComment,t.paper_id=this.paper_id,t.time=c,t.super_id=0,console.log(t),this.comments.push(t),this.replyComment="",n.innerHTML="",Y["a"].post("/api/comment",t).then((function(t){0===t.code?e.$message({type:"success",message:"评论成功"}):e.$message({type:"error",message:"评论失败"})})),this.loadMsg()}else this.$message({showClose:!0,type:"warning",message:"评论不能为空"})},sendCommentReply:function(e,t){var n=this;if(console.log("toId: "+t),this.replyComment){var c={},i=this.getCurTime();c.user_id=this.user_id,c.from=this.userName,c.to=this.to,c.fromHeadImg=this.myHeader,c.text=this.replyComment,c.time=i,c.super_id=t,console.log(c),console.log(this.to),c.paper_id=this.paper_id,this.comments[e].reply.push(c),Y["a"].post("/api/comment",c).then((function(e){0===e.code?n.$message({type:"success",message:"评论成功"}):n.$message({type:"error",message:"评论失败"})})),this.replyComment="",document.getElementsByClassName("reply-comment-input")[e].innerHTML="",this.loadMsg()}else this.$message({showClose:!0,type:"warning",message:"评论不能为空"})},onDivInput:function(e){this.replyComment=e.target.innerHTML},getCurTime:function(){var e=new Date;return e.toLocaleString()}}};n("0a6b");Z.render=X,Z.__scopeId="data-v-621c5d39";t["a"]=Z},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var c=n("1d80"),i=n("577e"),s=n("5899"),o="["+s+"]",r=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),a=function(e){return function(t){var n=i(c(t));return 1&e&&(n=n.replace(r,"")),2&e&&(n=n.replace(l,"")),n}};e.exports={start:a(1),end:a(2),trim:a(3)}},7156:function(e,t,n){var c=n("861d"),i=n("d2bb");e.exports=function(e,t,n){var s,o;return i&&"function"==typeof(s=t.constructor)&&s!==n&&c(o=s.prototype)&&o!==n.prototype&&i(e,o),e}},"857a":function(e,t,n){var c=n("1d80"),i=n("577e"),s=/"/g;e.exports=function(e,t,n,o){var r=i(c(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+i(o).replace(s,"&quot;")+'"'),l+">"+r+"</"+t+">"}},9911:function(e,t,n){"use strict";var c=n("23e7"),i=n("857a"),s=n("af03");c({target:"String",proto:!0,forced:s("link")},{link:function(e){return i(this,"a","href",e)}})},a316:function(e,t,n){},a9e3:function(e,t,n){"use strict";var c=n("83ab"),i=n("da84"),s=n("94ca"),o=n("6eeb"),r=n("5135"),l=n("c6b6"),a=n("7156"),u=n("d9b5"),p=n("c04e"),m=n("d039"),b=n("7c73"),d=n("241c").f,f=n("06cf").f,O=n("9bf2").f,j=n("58a8").trim,h="Number",y=i[h],g=y.prototype,v=l(b(g))==h,_=function(e){if(u(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,c,i,s,o,r,l,a=p(e,"number");if("string"==typeof a&&a.length>2)if(a=j(a),t=a.charCodeAt(0),43===t||45===t){if(n=a.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(a.charCodeAt(1)){case 66:case 98:c=2,i=49;break;case 79:case 111:c=8,i=55;break;default:return+a}for(s=a.slice(2),o=s.length,r=0;r<o;r++)if(l=s.charCodeAt(r),l<48||l>i)return NaN;return parseInt(s,c)}return+a};if(s(h,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var x,C=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof C&&(v?m((function(){g.valueOf.call(n)})):l(n)!=h)?a(new y(_(t)),n,C):_(t)},k=c?d(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),w=0;k.length>w;w++)r(y,x=k[w])&&!r(C,x)&&O(C,x,f(y,x));C.prototype=g,g.constructor=C,o(i,h,C)}},af03:function(e,t,n){var c=n("d039");e.exports=function(e){return c((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},c84b:function(e,t,n){"use strict";n.r(t);n("9911");var c=n("7a23"),i=Object(c["p"])("浏览论文"),s={style:{"text-align":"center"}},o={style:{"text-align":"center","white-space":"nowrap",color:"#545c64"}},r={style:{"font-size":"15px"}},l={style:{"font-size":"15px"}},a={style:{"font-size":"15px"}},u={style:{"font-size":"15px"}},p={style:{"font-size":"15px"}},m=Object(c["p"])("论文链接： "),b={style:{"font-size":"15px"}};function d(e,t,n,d,f,O){var j=this,h=Object(c["S"])("el-breadcrumb-item"),y=Object(c["S"])("el-breadcrumb"),g=Object(c["S"])("el-header"),v=Object(c["S"])("el-divider"),_=Object(c["S"])("el-link"),x=Object(c["S"])("comment"),C=Object(c["S"])("el-main"),k=Object(c["S"])("el-container");return Object(c["J"])(),Object(c["m"])("div",null,[Object(c["q"])(y,{separator:"/",style:{padding:"10px"}},{default:Object(c["ib"])((function(){return[Object(c["q"])(h,{to:{path:"/category"}},{default:Object(c["ib"])((function(){return[i]})),_:1}),Object(c["q"])(h,null,{default:Object(c["ib"])((function(){return[Object(c["p"])(Object(c["W"])(f.field_name),1)]})),_:1}),Object(c["q"])(h,null,{default:Object(c["ib"])((function(){return[Object(c["p"])(Object(c["W"])(f.lastPath),1)]})),_:1})]})),_:1}),Object(c["q"])(k,null,{default:Object(c["ib"])((function(){return[Object(c["q"])(g,null,{default:Object(c["ib"])((function(){return[Object(c["n"])("h1",s,Object(c["W"])(f.form.title),1),(Object(c["J"])(!0),Object(c["m"])(c["b"],null,Object(c["Q"])(f.form.authors,(function(e){return Object(c["J"])(),Object(c["m"])("div",o,Object(c["W"])(e),1)})),256))]})),_:1}),Object(c["q"])(C,{style:{"margin-top":"10px"}},{default:Object(c["ib"])((function(){return[Object(c["n"])("div",r,"摘要："+Object(c["W"])(f.form.summary),1),Object(c["q"])(v),Object(c["n"])("div",l,"发布会议："+Object(c["W"])(f.form.conference),1),Object(c["q"])(v),Object(c["n"])("div",a,"发布日期："+Object(c["W"])(f.form.date),1),Object(c["q"])(v),Object(c["n"])("div",u,"所属领域："+Object(c["W"])(f.form.field),1),Object(c["q"])(v),Object(c["n"])("div",p,[m,Object(c["q"])(_,{href:"{{form.link}}"},{default:Object(c["ib"])((function(){return[Object(c["p"])(Object(c["W"])(f.form.link),1)]})),_:1})]),Object(c["q"])(v),Object(c["n"])("div",b,"笔记内容："+Object(c["W"])(f.form.content),1),Object(c["q"])(v),Object(c["q"])(x,{style:{width:"100%"},paperid:j.paper_id},null,8,["paperid"])]})),_:1})]})),_:1})])}var f=n("4ea3"),O=n("b775"),j={name:"Detail",components:{comment:f["a"]},data:function(){return{field_name:"",paper_id:"",lastPath:"",form:{field:String}}},created:function(){var e=this;this.paper_id=this.$route.query.paper_id,console.log("jiazai详情"),O["a"].post("/api/paper?paper_id="+this.paper_id).then((function(t){if(0===t.code){var n;e.form=t.data,console.log(e.form.field);for(var c=0;c<t.data.fields.length;c++)console.log(t.data.fields[c].field_name),n=0===c?t.data.fields[c].field_name:n+","+t.data.fields[c].field_name;e.form.field=n,console.log(n)}else e.$message.error("加载失败")}))}};j.render=d;t["default"]=j}}]);
//# sourceMappingURL=chunk-7b4b674c.135e6469.js.map